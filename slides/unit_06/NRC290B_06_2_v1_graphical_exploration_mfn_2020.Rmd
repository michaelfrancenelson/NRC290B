---
title: "Week 6: Graphical Data Exploriation"
subtitle:  "Session 2"
date: Spring 2020
output:
  beamer_presentation:
    highlight: tango
    theme: "default"
    colortheme: "spruce"
    fonttheme: "serif"
    slide_level: 2
    incremental: false
urlcolor: blue
classoption: t
header-includes: 
 - \usepackage{multicol}
 - \usepackage{tikz}
 - \usepackage{tikzpagenodes}
 - \definecolor{grn}{rgb}{0.0, 0.2, 0.0}
 - \usepackage{tabto}
 - \usepackage{verbatim}
 - \usepackage{amsmath}
 - \usepackage{mathtools}
 - \usepackage{graphicx}
 - \definecolor{OG}{RGB}{0,64,8}
 - \definecolor{LG}{RGB}{0,102,51}
 - \definecolor{myRed}{RGB}{228,26,28}
 - \definecolor{myBlue}{RGB}{55,126,184}
 - \definecolor{myGreen}{RGB}{77,175,74}
 - \definecolor{myPurple}{RGB}{152,78,163}
 - \setbeamercolor{itemize item}{fg=white!0!LG}
 - \setbeamercolor{enumerate item}{fg=white!0!LG}
 - \setbeamercolor{enumerate subitem}{fg=white!70!LG}
 - \setbeamercolor{itemize subitem}{fg=white!70!LG}   
 - \setbeamercolor{itemize subsubitem}{fg=white!70!LG}   
 - \setbeamercolor{navigation symbols}{fg=white!70!LG, bg=white!70!LG}
 - \usepackage{inputenc}
 - \usepackage{booktabs}
 - \usepackage{caption}
 - \usetikzlibrary{patterns,arrows,decorations.pathreplacing}
---


```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
require(knitr)
require(here)
source(here("data", "environment_vars.R"))

```


```{r set up plots,echo=F, eval=T, warning=FALSE, results='hide'}

classData <- read.csv(here(chris_dat_dir, "classData16.csv"), h=T)
mander <- read.csv(here(chris_dat_dir, "mander.csv"), h=T)
bp <- read.table(here(chris_dat_dir, "bearpoop.txt"), h=T)

i = 1;
set.seed(12345)
nrow = 10
dat = data.frame(length = runif(n = nrow), width = rexp(nrow), mass = rpois(nrow, 34))


pdf(here(slide_img_dir, "randhist.pdf"), height=3, width=7)
par(mfrow=c(1,2), oma=c(0,0,0,0), mar=c(4,4,1,1))
set.seed(123)
hist(rnorm(300,50,10), col="orange", xlab="Values", main="", las=1, ylim=c(0,70),xlim=c(10,90))
box(bty="l")
plot(0,0,type="n",axes=F,xlab="",ylab="")
dev.off()


pdf(here(slide_img_dir, "randhist2.pdf"), height=3, width=7)
par(mfrow=c(1,2), oma=c(0,0,0,0), mar=c(4,4,1,1))
set.seed(123)
hist(rnorm(300,50,10), col="orange", xlab="Values", main="", las=1, ylim=c(0,70),xlim=c(10,90))
box(bty="l")
set.seed(123)
hist(rnorm(300,50,10), col="orange", xlab="Values", main="", las=1, ylim=c(0,70),xlim=c(10,90),breaks=seq(10,90,2))
box(bty="l")
dev.off()


pdf(here(slide_img_dir, "randhist3.pdf"), height=3, width=5)
par(mfrow=c(1,1), oma=c(0,0,0,0), mar=c(4,4,1,1))
set.seed(123)
rnd <- rnorm(300,50,10)
hist(rnd, col="orange", xlab="Values", main="", las=1, ylim=c(0,0.05), xlim=c(10,90), probability = TRUE)
box(bty="l")
lines(density(rnd),lwd=2,col=4)
dev.off()

pdf(here(slide_img_dir, "bw.pdf"),height=3.5, width=3)
par(mfrow=c(1,1),oma=c(0,0,0,0),mar=c(4,4,2,2))
boxplot(rnd,las=1, pch="")
dev.off()

pdf(here(slide_img_dir, "four.pdf"),height=3.5, width=3)
par(mfrow=c(1,1),oma=c(0,0,0,0),mar=c(4,4,2,2))
boxplot(rnd,las=1, axes=FALSE, pch="")
dev.off()

pdf(here(slide_img_dir, "runavg.pdf"), height=4, width=5)
plot(bp$Poop, lwd=2,col=4,bty="l",las=1,ylab="Running Average", xlab="no. of samples", ylim=c(0,2), type="l")
lines(bp$Bear, lwd=2,col=2,bty="l",las=1,ylab="Running Average", xlab="no. of samples")
abline(h=mean(bp$Bear), lty=2, col=2)
abline(h=mean(bp$Poop), lty=2, col=4)
legend("bottomright", lwd=2,col=c(4,2),legend=c("Poop","bear"), bty="n")
dev.off()


pdf(here(slide_img_dir, "salbox.pdf"), height=4, width=5)
boxplot(mander$SVL~mander$Sex, col=adjustcolor(c(2,3,4),0.2),ylab="SV length", las=1)
dev.off()


tmp <- c(0.7,1.9,3.1)
pdf(here(slide_img_dir, "salbarse.pdf"), height=4, width=5)
bars <- tapply(mander$SVL,mander$Sex,mean)
ss <- c(tapply(mander$SVL,mander$Sex,sd))/c(sqrt(table(mander$Sex)))
barplot(bars, col=adjustcolor(c(2,3,4),0.2),ylab="SV length", las=1, ylim=c(0,50))
arrows(c(tmp),bars-4.96*ss,c(tmp),bars+4.96*ss,lwd=2,length=0)
dev.off()

pdf(here(slide_img_dir, "salbar.pdf"), height=4, width=5)
bars <- tapply(mander$SVL,mander$Sex,mean)
barplot(bars, col=adjustcolor(c(2,3,4),0.2),ylab="SV length", las=1, ylim=c(0,50))
dev.off()

pdf(here(slide_img_dir, "salscatter.pdf"), height=4, width=7)
par(mfrow=c(1,2))
plot(mander$SVL ~ mander$Total_length, bg=adjustcolor(3,0.3), ylab="SV length (mm)", xlab="Total length (mm)", las=1, ylim=c(10,55), bty="l",pch=21, cex=1.2)
plot(mander$SVL ~ jitter(as.numeric(mander$Date)+5,3), bg=adjustcolor(4,0.3), ylab="SV length (mm)", xlab="Temperature (C)", las=1,ylim=c(10,55), bty="l", pch=21,cex=1.2)
dev.off()

pdf(here(slide_img_dir, "classpie.pdf"), height=4, width=4)
par(mar=c(1,1,1,1),oma=c(0,0,0,0))
pietab <- table(classData$Eyes)
pie(pietab, labels = paste(names(pietab),"\n (",pietab,")",sep=""), col = adjustcolor(c(4,"turquoise","brown",3),0.6), main="Eye color")
dev.off()

pdf(here(slide_img_dir, "classbar.pdf"), height=4, width=7)
bartab <- table(classData$Gender,classData$Eyes)
barplot(bartab, col = adjustcolor(c(2,4),0.4), main="Eye color by Gender", las=1, ylab="Count", beside=TRUE, ylim=c(0,10),legend=rownames(bartab))
dev.off()

```


## iClicker Question `r colorize(i, "blue")` `r i = i + 1`

Which of the following should I use to read the file `mydata.csv` into a data frame called `dat` in R?

\begin{enumerate}[A]
\item \texttt{dat = read.csv(mydata.csv)}
\item \texttt{read.csv(mydata.csv)}
\item \texttt{dat = read.csv("mydata.csv")}
\item \texttt{read.csv(mydata.csv, row.names = 1)}
\item \texttt{read.csv("mydata.csv")}
\end{enumerate}


\vfill
\begin{tikzpicture}[remember picture,overlay]
\node[xshift=-2cm,yshift=1cm] at (current page.south east)
{\includegraphics[height=0.25in]{../slide_images/iClicker_logo.png}};
\end{tikzpicture}




## iClicker Question `r colorize(i, "blue")` `r i = i + 1`

Which of the following lines of code will make a scatterplot with a custom **title**?

```{r, echo = FALSE}
head(dat, 3)
```

\begin{enumerate}[A]
\item \texttt{plot(dat\$mass, dat\$length, col = 3)}
\item \texttt{plot(dat\$mass, dat\$length, type = "l")}
\item \texttt{plot(dat\$length, dat\$mass, type = "p")}
\item \texttt{plot(dat\$mass, dat\$length, main = "data plot")}
\item \texttt{plot(dat\$length, dat\$mass)}
\end{enumerate}

\vfill
\begin{tikzpicture}[remember picture,overlay]
\node[xshift=-2cm,yshift=1cm] at (current page.south east)
{\includegraphics[height=0.25in]{../slide_images/iClicker_logo.png}};
\end{tikzpicture}



## iClicker Question `r colorize(i, "blue")` `r i = i + 1`

Which is the best location for me to type my R code for in-class and individual activities?

\begin{enumerate}[A]
\item A text file in Word or another word processor
\item The RStudio console pane
\item The RStudio code editor pane
\item The RStudio Environment pane
\end{enumerate}

\vfill
\begin{tikzpicture}[remember picture,overlay]
\node[xshift=-2cm,yshift=1cm] at (current page.south east)
{\includegraphics[height=0.25in]{iClicker_logo.png}};
\end{tikzpicture}




## Announcements


## Follow-up questions from the Chapter 5 homework

Error in Tuesday's title slide is now fixed.  You can re-download the correct version on Moodle.

Week 5 reading assignment question # 1:

"What is the difference between parametric and a non-parametric distribution?"

* The book's explanation of *parametric distribution* is slightly misleading.  The reading characterizes the Normal distribution as a parametric distribution, however there are many *parametric distributions*.  I like to use the term *theoretical distributions* when I'm describing *parametric distributions* to emphasize that they are precisely mathematically defined.  The behavior of *parametric distributions* is governed by 1 or more *parameters* in the probability functions.

* What is a **non-parametric distribution**?


Question 3:  "In R, what would be returned if you compute the mean value of a vector containing the following values: 4, 9, 2, 13, NA, 9? Please describe your methods.""

* Question from me:  Is there a benefit to having mean() fail when you pass an NA?



## For Today

Are there any general questions about data exploration, numeric or graphical?

Short lecture

Group activity: graphical data exploration part 2 - rarefaction data.

We'll start to use *inference* in the coming weeks!




## Some graphics pointers

In summary, graphs are a useful data visualization tool

- summarizing
- understanding
- describing
- presenting/communicating

## Some graphics pointers

In summary, graphs are a useful data visualization tool

- summarizing
- understanding
- describing
- presenting/communicating

**BUT** we must label the well or they are useless!

- label both axes
- provide a main title for your graph
- avoid clutter
- make it readable
- *I expect graphs to be propery labeled from now on*!

## Some graphics pointers

In summary, graphs are a useful data visualization tool

\vspace{1cm}

|Purpose | Graph Type|
|--------|-----------|
| Illustrating *distribution* | Histogram, Density plot | 
|                             | Box(-whisker) plot      |
| Illustrating *differences*  | Bar chart, Box plot     |
| Illustrating *correlations* | Scatter plot            |
| Illustrating *associations* | Pie chart, Bar chart    |
| Illustrating *sample size*  | Line plot of running avg|

## Beyond graphs, Towards statistics

- Graphs are powerful tools that provide insight and understanding of the patterns and relationships in the data.

- Don't give us the answer though:
    - are differences *significant*?
    - are associations *significatnt*?

\begin{tikzpicture}[remember picture,overlay]
\node[yshift=3cm] at (current page.south)
{\includegraphics[height=2in]{`r here(slide_img_dir, "salbox.pdf")`}};
\end{tikzpicture}

## Beyond graphs, Towards statistics

- Graphs are powerful tools that provide insight and understanding of the patterns and relationships in the data.

- Don't give us the answer though:
    - are differences *significant*?
    - are associations *significatnt*?

\begin{tikzpicture}[remember picture,overlay]
\node[yshift=3cm] at (current page.south)
{\includegraphics[height=2in]{`r here(slide_img_dir, "salscatter.pdf")`}};
\end{tikzpicture}

## Beyond graphs, Towards statistics

- Graphs are powerful tools that provide insight and understanding of the patterns and relationships in the data.

- Don't give us the answer though:
    - are differences *significant*?
    - are associations *significatnt*?
   
- Statistics is the tool we use to formally answer these questions!
    - the differences *are*/*are not* significant!
    - are associations *are*/*are not* significant!
    


## Group graphical activity